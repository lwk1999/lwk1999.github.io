import{_ as y,u as w}from"./index.23730af7.js";import{o as i,c as l,a as t,u as R,p as f,b as E,r as p,F as H,d as K,g as Q,e as h,w as M,E as j,n as S,f as N,h as q,t as k,i as Z,v as L,j as W,k as z,l as J}from"./index.658b6b9b.js";const x="/assets/kk.e2ca58b9.jpg",D="/assets/wechat1.c7c7dae1.png",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACodJREFUeF7tm0+oXFcdx39neG/MgItUpKZdlDYW3Ng2FkqhKGi7sIFusonUuOlOISn44txzw2xGSHhz7mvfS4MBly7SJlLQrrSIRRd2k2bRaFbGtnTXdBFqEILMe/fIwCuIZGbuvfWcO79zP2+TxTvn9/v+Pr/5MH/exAg/EIDAXAIGNhCAwHwCCMKjAwILCCAIDw8IIAiPAQg0I8AzSDNu3OoIAQTpyKIZsxkBBGnGjVsdIYAgHVk0YzYjgCDNuHGrIwQQpCOLZsxmBBCkGTdudYQAgnRk0YzZjACCNOPGrY4QQJCOLJoxmxFAkGbcuNURAgjSkUUzZjMCCNKMG7c6QgBBOrJoxmxGAEGaceNWRwggSEcWzZjNCCBIM27c6ggBBOnIohmzGQEEacaNWx0h0EiQ8Xh8YDAYHBGRI2VZHuoIK8ZUSMAYc0dErvX7/RsbGxu3645QS5CiKF7w3p8RkSdF5EDdZpyHQMsErovIZWutq5qjkiDj8XhtMBjsiMjJqoU5B4FVJeC9f6/f7z9f5RllqSDb29uPTqfTm6s6LLkg0JTA7u7uodFodGvR/aWCOOc+FJFHmobgHgRWmMBVa+3TjQVxzr0iIqdXeECiQeALEfDeD/M8nz3O7/kz9xlka2vr/rIsFz79fKFkXIbAihAwxjyQZdkn94ozV5DNzc1ne73eOysyAzEgEIyAMeZolmVv1xKkKIpT3vsLwVJRGAIrQmD2p4s8zye1BHHOXRKREysyAzEgEJLAFWvtiwgSEjG1NROoLwgvsTTvm+x1CDR6icWb9DqIOauZQKM36XzMq3nlZK9DoNHHvLMGzrmzIjKq04yzENBEwHt/Ms/zi/MyL/2qSVEUV733T2kamqwQqEjgTWvt8UVnlwqy/0zysYg8VLEpxyCggcBn1tr7lgWtJMi+JC+LyGvLCvJ7CCgg8Ja19liVnJUF2ZfkOREZi8hhEXmwSgPOQGBFCNw2xnzgvX/DWnu+aqZagvx30Z2dnYPT6fThvb29g1WbcQ4CsQl47++ur69/NBwOP23Su7EgTZpxBwLaCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyoBBImKm2baCCCIto2RNyqB2oJsbm4eNsY8JiKPzf41xtwfNTHNIFCDgPf+jvf+Xe/9+2VZXh+NRrdqXJfKgozH4y8PBoMtEflxnQachcCKEfiFtfZU1UyVBJlMJt82xvxRRL5UtTDnILDCBP7Z6/VeGg6Hv12WcakgzrkTInJpWSF+DwFtBLz338nz/C+Lci8UZHt7+yvT6XT2mm1N2/DkhUAFAv++e/fuV8fj8b/mnV0oiHPu1yJyvEIjjkBAK4FfWmt/UluQoii+7r3/h9apyQ2BqgTW1ta+cfr06b/f6/zcZ5Ctra1jZVn+pmoTzkFAKwFjzA+zLLtcSxDn3FkRGWkdmtwQqEHgVWvtz2oJUhTFn7z3363RhKMQUEnAGPPnLMu+V0uQyWTijDGZyokJDYF6BM5ba39aS5CiKH7gvb9Srw+nIaCPQFmWL505c+ZXtQQ5d+7cN9fW1v6mb1wSQ6AeAWPMt7Ise7+WILPDzrl3ReSZeu04DQE9BIwxf8iy7PvzEi/8Q+FkMjlqjPmdnnFJCoF6BHq93hPD4fCvjQSZXZpMJheMMZW//VgvHqch0B4BY8zJLMsuLkqw9MuK+y+1XhWRjfZGoTME/u8EXrfW/mhZ1UqC7D+TPGOMmf1/EN6TLKPK71eZwE0R+bm19vUqISsLMiu2/5+mjhljHheRx733T4jI16o04gwE2iBgjLlTluVVEblmjLmxvr7++42NjdtVs9QSpGpRzkEgFQIIksommSMIAQQJgpWiqRBAkFQ2yRxBCCBIEKwUTYUAgqSySeYIQgBBgmClaCoEECSVTTJHEAIIEgQrRVMhgCCpbJI5ghBAkCBYKZoKAQRJZZPMEYQAggTBStFUCCBIKptkjiAEECQIVoqmQgBBUtkkcwQhgCBBsFI0FQIIksommSMIAQQJgpWiqRBAkFQ2yRxBCCBIEKwUTYUAgqSySeYIQgBBgmClaCoEECSVTTJHEAIIEgQrRVMhgCCpbJI5ghBAkCBYKZoKAQRJZZPMEYQAggTBStFUCCBIKptkjiAEECQIVoqmQgBBUtkkcwQhgCBBsFI0FQIIksommSMIAQQJgpWiqRBAkFQ2yRxBCCBIEKwUTYUAgqSySeYIQgBBgmClaCoEECSVTTJHEAIIEgQrRVMhgCCpbJI5ghBAkCBYKZoKAQRJZZPMEYQAggTBStFUCCBIKptkjiAEECQIVoqmQqCxIDs7Owen0+nDe3t7B1OBwRzpEfDe311fX/9oOBx+2mS6WoI4554TkbGIHBaRB5s05A4EWiJw2xjzgff+DWvt+aoZKgvinHtZRF6rWphzEFhhAm9Za49VyVdJEOfcxyLyUJWCnIGAEgKfWWvvW5Z1qSBFUVz13j+1rBC/h4BCAm9aa48vyr1QEOfcWREZKRycyBCoRMB7fzLP84vzDs8VZGtr6/6yLG9V6sIhCCgmYIx5IMuyT+41wlxBNjc3n+31eu8onpvoEKhEwBhzNMuyt2sJUhTFKe/9hUodOAQBxQS892fyPJ/UEsQ5d0lETiiem+gQqErgirX2RQSpiotzXSNQXxBeYnXtMdLdeRu9xOJNencfMF2bvNGbdD7m7drDpLvzNvqYd4bLOfeKiJzuLjomT52A936Y5/nscX7Pn6VfNXHOfSgij6QOivk6SeCqtfbpRZMvFWR7e/vR6XR6s5P4GDppAru7u4dGo9HCb4ssFWRGaDwerw0Ggx0ROZk0MYbrBAHv/Xv9fv/5jY2N28sGriTI50WKonhh9pGYiDwpIgeWFef3EFgxAtdF5LK11lXNVUuQz4uOx+MDg8HgiIgcKcvyUNVmnINAbALGmDsicq3f79+o8ozxv/kaCRJ7SPpBoC0CCNIWefqqIIAgKtZEyLYIIEhb5OmrggCCqFgTIdsigCBtkaevCgIIomJNhGyLAIK0RZ6+KgggiIo1EbItAgjSFnn6qiCAICrWRMi2CCBIW+Tpq4IAgqhYEyHbIoAgbZGnrwoCCKJiTYRsiwCCtEWevioIIIiKNRGyLQII0hZ5+qoggCAq1kTItgggSFvk6auCAIKoWBMh2yKAIG2Rp68KAgiiYk2EbIsAgrRFnr4qCPwHopDV2KPYAFQAAAAASUVORK5CYII=";const T=o=>(f("data-v-a6ce3a49"),o=o(),E(),o),V={class:"navbar",ondragstart:"return false",onselectstart:"return false",onselect:"document.selection.empty()"},G={class:"headPic"},U={key:0,src:x,alt:""},Y={key:1,class:"nonheadPic"},P=T(()=>t("div",{class:"tabbar"},[t("img",{src:D,alt:""})],-1)),X=T(()=>t("div",{class:"more"},[t("img",{src:O,alt:""})],-1)),$={__name:"navbar",setup(o){const _=window.localStorage.getItem("id");return(s,d)=>(i(),l("div",V,[t("div",G,[R(_)?(i(),l("img",U)):(i(),l("div",Y))]),P,X]))}},ee=y($,[["__scopeId","data-v-a6ce3a49"]]);const te=o=>(f("data-v-3ec030fa"),o=o(),E(),o),oe={class:"communicationList"},ne=te(()=>t("div",{class:"topBar"},null,-1)),se={class:"list"},ce=["onClick"],ae={class:"headpic"},ie={key:0,src:x,alt:""},le={key:1,class:"nonheadPic"},de={__name:"communicationList",emits:["chooseObject"],setup(o,{emit:_}){const s=p([]);s.value=JSON.parse(window.localStorage.getItem("communicationList")),s.value.forEach(n=>{n.unreadCount=0,n.unreadContent=[]});const{curObject:d,setCurObject:e,setUnreadContent:c}=w(),u=n=>{_("chooseObject"),e({id:n.id,name:n.name}),n.unreadCount&&(c(n.unreadContent),n.unreadContent=[],n.unreadCount=0)},{proxy:g}=Q(),v=g.SocketService;return v.ws.onmessage=n=>{n=JSON.parse(n.data);const I=n.message;n.type==="record"&&s.value.forEach(m=>{m.id===I.id&&(d.id!==I.id&&(m.unreadCount++,m.unreadContent.push(I)),m={...m,...I})})},(n,I)=>{const m=j;return i(),l("div",oe,[ne,t("div",se,[(i(!0),l(H,null,K(s.value,(B,a)=>(i(),l("div",{class:"singleCommunication",key:a},[t("div",{class:"content",onClick:C=>u(B)},[t("div",ae,[h(m,{value:B.unreadCount,hidden:B.unreadCount==0,max:99,class:"item"},{default:M(()=>[B.headPic?(i(),l("img",ie)):(i(),l("div",le))]),_:2},1032,["value","hidden"])])],8,ce)]))),128))])])}}},re=y(de,[["__scopeId","data-v-3ec030fa"]]);const F=o=>(f("data-v-919e52a0"),o=o(),E(),o),me={class:"container"},Ce={class:"communicationContent"},ue={key:0,class:"self"},_e={class:"content"},ge=F(()=>t("div",{class:"headPic"},null,-1)),Ie={key:1,class:"object"},ve=F(()=>t("div",{class:"headPic"},null,-1)),Be={class:"content"},pe={__name:"communicationContent",props:{newMsg:{type:Object,default:()=>({})}},setup(o){const _=o,{curObject:s,unreadContent:d,setUnreadContent:e}=w(),c=window.localStorage.getItem("id"),u=p([{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"},{id:"lwk",content:"HelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHelloHello",time:"09:00",date:"2022-10-15"},{id:"kk",content:"Hello",time:"09:00",date:"2022-10-15"}]);d.length&&(console.log(d),u.value=u.value.concat(d),e([]));const{proxy:g}=Q(),v=g.SocketService;v.ws.onmessage=a=>{a=JSON.parse(a.data);const C=a.message;a.type==="record"&&(u.value.push(C),S(()=>{if(B()){n.value++;const r=document.querySelector(".newMsgTip");r.style.transform="translateY(0)",r.style.opacity="1"}else m()}))};const n=p(0),I=()=>{m();const a=document.querySelector(".newMsgTip");a.style.transform="translateY(100%)",a.style.opacity="0";const C=setTimeout(()=>{n.value=0,clearTimeout(C)},500)},m=()=>{const a=document.getElementsByClassName("communicationContent")[0],C=document.querySelectorAll(".singleContent"),r=C[C.length-1];a.scrollTo(0,r.offsetTop)},B=()=>{const a=document.querySelector(".communicationContent").getBoundingClientRect(),C=document.querySelectorAll(".singleContent"),r=C[C.length-2].getBoundingClientRect();return a.top+a.height*1.2<r.top};return N(()=>{m()}),q(()=>_.newMsg,(a,C)=>{const r=a.msg,A=a.time,b=a.date;u.value.push({id:c,content:r,time:A,date:b}),v.send({type:"record",data:{id:c,objectid:s,content:r,time:A,date:b}}),S(()=>{m()})},{deep:!0}),(a,C)=>(i(),l("div",me,[t("div",Ce,[(i(!0),l(H,null,K(u.value,(r,A)=>(i(),l("div",{class:"singleContent",key:A},[r.id===R(c)?(i(),l("div",ue,[t("div",_e,k(r.content),1),ge])):(i(),l("div",Ie,[ve,t("div",Be,k(r.content),1)]))]))),128))]),t("div",{class:"newMsgTip",onClick:I}," \u65B0\u6D88\u606F "+k(n.value),1)]))}},he=y(pe,[["__scopeId","data-v-919e52a0"]]);const ye="/assets/face.a16693b0.png";const Ae=o=>(f("data-v-5dfe3905"),o=o(),E(),o),ke={class:"editArea"},fe=Ae(()=>t("div",{class:"toolBar"},[t("div",{class:"emoji"},[t("img",{src:ye,alt:""})])],-1)),Ee={class:"inputArea"},we={class:"sendArea"},Re={__name:"editArea",emits:["send"],setup(o,{emit:_}){const s=p(""),d=()=>{if(!s.value)return;const e=new Date,c=e.getHours()>10?e.getHours():"0"+e.getHours(),u=e.getMinutes()>10?e.getMinutes():"0"+e.getMinutes(),g=e.getSeconds()>10?e.getSeconds():"0"+e.getSeconds(),v=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),n=c+":"+u+":"+g;_("send",{msg:s.value,time:n,date:v}),s.value=""};return N(()=>{const e=document.querySelector("textarea");e.addEventListener("keypress",c=>{c.key==="Enter"&&c.shiftKey?(c.preventDefault(),s.value+=`
`):c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),d())}),e.focus()}),(e,c)=>{const u=W;return i(),l("div",ke,[fe,t("div",Ee,[Z(t("textarea",{class:"textArea","onUpdate:modelValue":c[0]||(c[0]=g=>s.value=g)},null,512),[[L,s.value]])]),t("div",we,[h(u,{placement:"top",width:170,trigger:"hover",content:"Enter\u53D1\u9001, Enter+shift\u6362\u884C"},{reference:M(()=>[t("div",{class:"sendBtn",onClick:d}," \u53D1\u9001 ")]),_:1})])])}}},be=y(Re,[["__scopeId","data-v-5dfe3905"]]);const Se={class:"communicationWindow"},He={class:"topBar"},Ke={class:"curName"},Qe={__name:"communicationWindow",setup(o){const _=w(),s=p({}),d=e=>{s.value=e};return(e,c)=>(i(),l("div",Se,[t("div",He,[t("div",Ke,k(R(_).curObject.name),1)]),h(he,{newMsg:s.value},null,8,["newMsg"]),h(be,{onSend:d})]))}},Me=y(Qe,[["__scopeId","data-v-c8f48b85"]]);const Ne={class:"home"},xe={__name:"Home",setup(o){document.querySelector("body").addEventListener("contextmenu",e=>{e.preventDefault()});const s=p(!1),d=()=>{s.value=!0};return(e,c)=>(i(),l("div",Ne,[h(ee),h(re,{onChooseObject:d}),s.value?(i(),z(Me,{key:0})):J("",!0)]))}},je=y(xe,[["__scopeId","data-v-fa9422c9"]]);export{je as default};
